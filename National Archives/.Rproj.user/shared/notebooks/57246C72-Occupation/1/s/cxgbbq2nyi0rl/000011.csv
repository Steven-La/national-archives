"0","occupations <- occupations %>%"
"0","  mutate("
"0","    category = case_when("
"0","      str_detect(tolower(term), str_c(category_map[[""Domestic & Personal Service""]], collapse = ""|"")) ~ ""Domestic & Personal Service"","
"0","      str_detect(tolower(term), str_c(category_map[[""Manual Workers""]], collapse = ""|"")) ~ ""Manual Workers"","
"0","      str_detect(tolower(term), str_c(category_map[[""Merchants & Traders""]], collapse = ""|"")) ~ ""Merchants & Traders"","
"0","      str_detect(tolower(term), str_c(category_map[[""Religious Orders""]], collapse = ""|"")) ~ ""Religious Orders"","
"0","      str_detect(tolower(term), str_c(category_map[[""Nonworking""]], collapse = ""|"")) ~ ""Nonworking"","
"0","      str_detect(tolower(term), str_c(category_map[[""Craftsmen & Artisans""]], collapse = ""|"")) ~ ""Craftsmen & Artisans"","
"0","      str_detect(tolower(term), str_c(category_map[[""Legal & Clerical""]], collapse = ""|"")) ~ ""Legal & Clerical"","
"0","      str_detect(tolower(term), str_c(category_map[[""Medical""]], collapse = ""|"")) ~ ""Medical"","
"0","      str_detect(tolower(term), str_c(category_map[[""Military & Security""]], collapse = ""|"")) ~ ""Military & Security"","
"0","      str_detect(tolower(term), str_c(category_map[[""Agriculture""]], collapse = ""|"")) ~ ""Agriculture"","
"0","      str_detect(tolower(term), str_c(category_map[[""Maritime & Transportation""]], collapse = ""|"")) ~ ""Maritime & Transportation"","
"0","      str_detect(tolower(term), str_c(category_map[[""Performers, Artists, & Intellectuals""]], collapse = ""|"")) ~ ""Performers, Artists, & Intellectuals"","
"0","      str_detect(tolower(term), str_c(category_map[[""Other""]], collapse = ""|"")) ~ ""Other"","
"0","      TRUE ~ ""Uncategorized"""
"0","    )"
"0","  )"
"0",""
